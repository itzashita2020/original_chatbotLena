# Makefile –¥–ª—è Project_init
# –≠—Ç–æ—Ç —Ñ–∞–π–ª —É–ø—Ä–æ—â–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç Claude Code –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —á—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

.PHONY: help dev build test lint typecheck security clean install audit fix-lint

# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑–∞—Ç—å help
.DEFAULT_GOAL := help

## help: –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–º–æ—â–∏
help:
	@echo "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:"
	@echo ""
	@sed -n 's/^##//p' ${MAKEFILE_LIST} | column -t -s ':' | sed -e 's/^/ /'
	@echo ""

## dev: –ó–∞–ø—É—Å—Ç–∏—Ç—å development —Å–µ—Ä–≤–µ—Ä
dev:
	@echo "üöÄ –ó–∞–ø—É—Å–∫ development —Å–µ—Ä–≤–µ—Ä–∞..."
	npm run dev

## build: –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –¥–ª—è production
build:
	@echo "üì¶ –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞..."
	npm run build

## start: –ó–∞–ø—É—Å—Ç–∏—Ç—å production —Å–µ—Ä–≤–µ—Ä (–ø–æ—Å–ª–µ build)
start:
	@echo "‚ñ∂Ô∏è  –ó–∞–ø—É—Å–∫ production —Å–µ—Ä–≤–µ—Ä–∞..."
	npm run start

## test: –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
test:
	@echo "üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤..."
	npm run test

## test-watch: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –≤ watch —Ä–µ–∂–∏–º–µ
test-watch:
	@echo "üëÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ watch —Ä–µ–∂–∏–º–µ..."
	npm run test:watch

## lint: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ –ª–∏–Ω—Ç–µ—Ä–æ–º
lint:
	@echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º..."
	npm run lint

## fix-lint: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ª–∏–Ω—Ç–µ—Ä–∞
fix-lint:
	@echo "üîß –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏–Ω—Ç–µ—Ä–∞..."
	npm run lint -- --fix

## typecheck: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TypeScript —Ç–∏–ø—ã
typecheck:
	@echo "üìò –ü—Ä–æ–≤–µ—Ä–∫–∞ TypeScript —Ç–∏–ø–æ–≤..."
	npm run type-check

## security: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (npm audit)
security:
	@echo "üîê –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏..."
	npm audit
	@echo ""
	@echo "–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: make security-fix"

## security-fix: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —É—è–∑–≤–∏–º–æ—Å—Ç–∏
security-fix:
	@echo "üîê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π..."
	npm audit fix

## audit: –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (lint + typecheck + test + security)
audit:
	@echo "üîé –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞..."
	@make lint
	@make typecheck
	@make test
	@make security

## install: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
install:
	@echo "üì• –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
	npm install

## clean: –û—á–∏—Å—Ç–∏—Ç—å build –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏ node_modules
clean:
	@echo "üßπ –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞..."
	rm -rf node_modules .next dist build out
	@echo "‚úÖ –ü—Ä–æ–µ–∫—Ç –æ—á–∏—â–µ–Ω"

## reinstall: –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (clean + install)
reinstall: clean install
	@echo "‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"

## format: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ (Prettier)
format:
	@echo "‚ú® –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞..."
	npm run format

## db-migrate: –ó–∞–ø—É—Å—Ç–∏—Ç—å database –º–∏–≥—Ä–∞—Ü–∏–∏
db-migrate:
	@echo "üóÑÔ∏è  –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î..."
	npm run db:migrate

## db-reset: –°–±—Ä–æ—Å–∏—Ç—å –ë–î –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
db-reset:
	@echo "‚ö†Ô∏è  –°–±—Ä–æ—Å –ë–î..."
	npm run db:reset

## db-seed: –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ë–î —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
db-seed:
	@echo "üå± –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ë–î —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏..."
	npm run db:seed

## pre-commit: –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º (lint + typecheck)
pre-commit:
	@echo "‚úÖ Pre-commit –ø—Ä–æ–≤–µ—Ä–∫–∏..."
	@make lint
	@make typecheck
	@echo "‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∫–æ–º–º–∏—Ç—É!"

## pre-push: –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ push (audit + build)
pre-push:
	@echo "‚úÖ Pre-push –ø—Ä–æ–≤–µ—Ä–∫–∏..."
	@make audit
	@make build
	@echo "‚úÖ –ì–æ—Ç–æ–≤–æ –∫ push!"

## init: –ü–µ—Ä–≤–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–¥–ª—è –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)
init:
	@echo "üéâ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞..."
	@make install
	@cp -n .env.example .env.local || echo ".env.local —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
	@echo ""
	@echo "‚úÖ –ü—Ä–æ–µ–∫—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!"
	@echo ""
	@echo "–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
	@echo "1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π .env.local —Å –Ω—É–∂–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏"
	@echo "2. –ó–∞–ø—É—Å—Ç–∏ 'make dev' –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ development —Å–µ—Ä–≤–µ—Ä–∞"

## doctor: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)
doctor:
	@echo "üî¨ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è..."
	@echo ""
	@echo "Node.js –≤–µ—Ä—Å–∏—è:"
	@node --version || echo "‚ùå Node.js –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
	@echo ""
	@echo "npm –≤–µ—Ä—Å–∏—è:"
	@npm --version || echo "‚ùå npm –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
	@echo ""
	@echo "git –≤–µ—Ä—Å–∏—è:"
	@git --version || echo "‚ùå git –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
	@echo ""
	@echo "gh CLI –≤–µ—Ä—Å–∏—è:"
	@gh --version || echo "‚ö†Ô∏è  gh CLI –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
	@echo ""
	@test -f .env.local && echo "‚úÖ .env.local —Å—É—â–µ—Å—Ç–≤—É–µ—Ç" || echo "‚ö†Ô∏è  .env.local –Ω–µ –Ω–∞–π–¥–µ–Ω"
	@test -d node_modules && echo "‚úÖ node_modules —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã" || echo "‚ö†Ô∏è  node_modules –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (–∑–∞–ø—É—Å—Ç–∏: make install)"
